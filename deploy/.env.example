## Deployment environment (bitcoind + CLN + server + web)
#
# Used by: `deploy/docker-compose.yml`
#
# Quick start:
#   1) `cp deploy/.env.example deploy/.env`
#   2) Set at least `BTC_RPC_USER` + `BTC_RPC_PASSWORD`
#   3) `make deploy-up`  (or `make docker-up`)
#
# What gets deployed:
# - `btc`  (bitcoind)      : configured via `deploy/btc/config/bitcoin.conf.template`
# - `cln`  (lightningd)    : configured via `deploy/cln/config/conf.template`
# - `server` (ln-server)   : talks to CLN via a unix socket volume (not TCP)
# - `web`  (nginx + SPA)   : serves UI and reverse-proxies API routes to `server`
#
# Security model:
# - CLN is *admin* RPC over a unix socket volume shared with the `server` container.
# - bitcoind JSON-RPC is published to the host by default (convenient for ops),
#   but it is protected only by username/password. Consider tightening:
#   - `BTC_RPC_BIND` / `BTC_RPC_ALLOWIP`
#   - removing the RPC port mapping in `deploy/docker-compose.yml`



## Gateway (host ports)
# Host port for the API container (Axum). Swagger will be at:
#   http://localhost:<HOST_SERVER_PORT>/swagger-ui
HOST_SERVER_PORT=3000

## Web UI (host ports)
# Host port for the UI container (nginx). With the default nginx proxy config:
# - UI:  http://localhost:<HOST_WEB_PORT>
# - API: http://localhost:<HOST_WEB_PORT>/health (proxied to `server`)
HOST_WEB_PORT=8080



## Bitcoin Core (bitcoind) (required)
#
# This compose runs bitcoind inside Docker.
# A `bitcoin.conf` is generated from these env vars at container startup
# (see `deploy/btc/config/bitcoin.conf.template`).
#
# Network/chain (default: testnet4). Options depend on your Bitcoin Core build,
# but typical values are: `main`, `testnet`, `testnet4`, `regtest`, `signet`.
BTC_CHAIN=testnet4

### RPC auth (required)
# Used for:
# - CLN connecting to bitcoind
# - `ln-server` /health Bitcoin status (optional)
# - optional host access to JSON-RPC (if you keep the RPC port published)
BTC_RPC_USER=
BTC_RPC_PASSWORD=

### Ports (optional overrides)
# These are *container ports* and also *published host ports* in `deploy/docker-compose.yml`.
BTC_RPC_PORT=48332
BTC_P2P_PORT=48333

### Performance / disk tuning (optional; defaults shown)
#BTC_PRUNE=550           # keep a minimal chain window (reduces disk usage)
#BTC_DBCACHE=2048        # MiB cache (increase on RAM-rich hosts)
#BTC_MAXCONNECTIONS=32   # peer connections
#BTC_FALLBACKFEE=0.0001  # only used when wallet is enabled; harmless default

### RPC networking (optional; defaults shown)
# If you keep RPC published, do not use `0.0.0.0/0` on a public host.
#BTC_RPC_BIND=0.0.0.0
#BTC_RPC_ALLOWIP=0.0.0.0/0

### Advanced (rare; defaults shown)
#BTC_SERVER=1
#BTC_DISABLEWALLET=1
#BTC_BLOCKFILTERINDEX=0



## Core Lightning (CLN) (optional overrides)
#
# CLN must run on the same chain as bitcoind. Keep these aligned:
# - `BTC_CHAIN` (bitcoind)
# - `CLN_NETWORK` (CLN)
#
# P2P:
# - `CLN_PORT` is still used as the in-container bind port.
# - It is NOT published to the host unless you add a `ports:` mapping.
#CLN_ALIAS=cln
#CLN_NETWORK=testnet4
#CLN_PORT=9735
#CLN_GIT_REF=v25.09.3
#CLN_GIT_REPO=https://github.com/ElementsProject/lightning.git

## ln-server limits (optional)
# These control what the gateway exposes via LNURL-withdraw.
SERVER_MIN_WITHDRAWABLE_MSAT=1000
SERVER_MAX_WITHDRAWABLE_MSAT=100000
